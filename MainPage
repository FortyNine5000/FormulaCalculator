<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>G-Tube Formula Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .container { max-width: 600px; margin: auto; }
    label { font-weight: bold; display: block; margin-top: 10px; }
    input[type="number"], input[type="text"] { width: 100%; padding: 8px; margin-top: 4px; }
    button { padding: 10px 20px; margin-top: 15px; }
    .output { background: #f0f0f0; padding: 15px; margin-top: 20px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>G-Tube Formula Calculator</h1>
    <p>This calculator helps you determine the correct mix of water and formula powder for g-tube fed babies using pumps.</p>
    <form id="calcForm">
      <label for="formulaType">Formula Type:</label>
      <input type="text" id="formulaType" value="Alimentum" required>
      
      <label for="desiredCal">Desired Calories per Ounce (e.g., 22):</label>
      <input type="number" id="desiredCal" step="0.1" value="22" required>
      
      <label for="feeds">Number of Feeds per Day:</label>
      <input type="number" id="feeds" value="7" required>
      
      <label for="mlPerFeed">Milliliters per Feed:</label>
      <input type="number" id="mlPerFeed" value="150" required>
      
      <label for="pumpPriming">Pump Priming Volume (ml):</label>
      <input type="number" id="pumpPriming" value="15" required>
      
      <label for="spillExtra">Extra Volume for Spills (ml):</label>
      <input type="number" id="spillExtra" value="30" required>
      
      <button type="button" onclick="calculateFormula()">Calculate</button>
    </form>
    
    <div id="output" class="output" style="display:none;"></div>
  </div>
  
  <script>
    function calculateFormula() {
      // Retrieve input values
      const formulaType = document.getElementById('formulaType').value;
      const desiredCal = parseFloat(document.getElementById('desiredCal').value);
      const feeds = parseFloat(document.getElementById('feeds').value);
      const mlPerFeed = parseFloat(document.getElementById('mlPerFeed').value);
      const pumpPriming = parseFloat(document.getElementById('pumpPriming').value);
      const spillExtra = parseFloat(document.getElementById('spillExtra').value);
      
      // Standard mixing instructions: 1 scoop per 2 oz water yields 20 cal/oz formula
      const standardCal = 20;
      
      // Calculate total water volume in ml (feeds + extra volumes)
      const totalWaterML = (feeds * mlPerFeed) + pumpPriming + spillExtra;
      // Convert total water from ml to ounces (1 oz = 29.5735 ml)
      const totalWaterOz = totalWaterML / 29.5735;
      
      // Calculate formula powder needed:
      // For every 2 oz water, standard is 1 scoop for 20 cal/oz.
      // For desired concentration, use scaling factor: desiredCal / standardCal.
      // Thus, scoops needed = (totalWaterOz / 2) * (desiredCal / standardCal)
      const scoopsNeeded = (totalWaterOz / 2) * (desiredCal / standardCal);
      
      // Build confirmation message
      const outputDiv = document.getElementById('output');
      outputDiv.style.display = "block";
      outputDiv.innerHTML = `
        <h2>Calculation Results</h2>
        <p><strong>Formula Type:</strong> ${formulaType}</p>
        <p><strong>Total Water Volume:</strong> ${totalWaterOz.toFixed(2)} oz (${totalWaterML.toFixed(0)} ml)</p>
        <p><strong>Formula Powder Required:</strong> ${scoopsNeeded.toFixed(2)} scoops</p>
        <p><strong>Total Formula Prepared:</strong> ${totalWaterML.toFixed(0)} ml</p>
        <p>
          Based on ${feeds} feeds per day at ${mlPerFeed} ml per feed,
          plus ${pumpPriming} ml for pump priming and ${spillExtra} ml for spills,
          the calculator adjusted the standard mix (1 scoop per 2 oz for 20 cal/oz) to a desired concentration of ${desiredCal} cal/oz.
        </p>
      `;
    }
  </script>
</body>
</html>
